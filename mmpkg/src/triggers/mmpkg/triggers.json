[{
    "name": "My Affects",
    "isFolder": "yes",
    "children": [{
        "name": "Armor",
        "isFolder": "yes",
        "children": [{
            "name": "armor.off",
            "patterns": [{
              "pattern": "^The hardened air around you dissipates.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"armor\",false)"
          },
          {
            "name": "armor.on",
            "patterns": [{
              "pattern": "^There is a faint sound, a very high pitched shriek as the air is hardened around you.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"armor\",true)"
          }]
      },
      {
        "name": "Combat Blink",
        "isFolder": "yes",
        "children": [{
            "name": "combat.blink.off",
            "patterns": [{
              "pattern": "^The bluish field at the edge of your vision dissipates.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"combat blink\",false)"
          },
          {
            "name": "combat.blink.on",
            "patterns": [{
              "pattern": "^The world becomes blue-tinted for a moment, then fades back to normal.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"combat blink\",true)"
          }]
      },
      {
        "name": "Whirlwind",
        "isFolder": "yes",
        "children": [{
            "name": "whirlwind.off",
            "patterns": [{
              "pattern": "^You stop moving as though empowered by a whirlwind.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"whirlwind\",false)"
          },
          {
            "name": "whirlwind.on",
            "patterns": [{
              "pattern": "^You begin moving rapidly, as though caught in a sympathetic whirlwind.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"whirlwind\",true)"
          }]
      },
      {
        "name": "Fireshield",
        "isFolder": "yes",
        "children": [{
            "name": "fireshield.off",
            "patterns": [{
              "pattern": "^Your fireshield sputters and goes out.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"fireshield\",false)"
          },
          {
            "name": "fireshield.on",
            "patterns": [{
              "pattern": "^Flames explode around your body, yet you feel no heat or pain.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"fireshield\",true)"
          }]
      },
      {
        "name": "Underwater Breathing",
        "isFolder": "yes",
        "children": [{
            "name": "uwbreathing.off",
            "patterns": [{
              "pattern": "^You feel the magic enabling you to breathe underwater diminish.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"underwater breathing\",false)"
          },
          {
            "name": "uwbreathing.on",
            "patterns": [{
              "pattern": "^You choke as your lungs adjust to underwater breathing.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"underwater breathing\",true)"
          }]
      },
      {
        "name": "Shadow Armor",
        "isFolder": "yes",
        "children": [{
            "name": "shadow.armor.off",
            "patterns": [{
              "pattern": "^The shadows protecting you seem to subside.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"shadow armor\",false)"
          },
          {
            "name": "shadow.armor.on",
            "patterns": [{
              "pattern": "^A dark, shadowy mist gathers itself around your form.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"shadow armor\",true)"
          }]
      },
      {
        "name": "Detect Invisibility",
        "isFolder": "yes",
        "children": [{
            "name": "detect.invisibility.on",
            "patterns": [{
              "pattern": "^You feel a sharp prickling on the back of your neck as your senses are heightened.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"detect invisibility\",true)"
          },
          {
            "name": "detect.invisibility.off",
            "patterns": [{
              "pattern": "^You feel different as your senses become less heightened.$",
              "type": "regex"
              }],
            "script": "mmpkg.doAffect(\"detect invisibility\",false)"
          }
        ]
      },
      {
        "name": "Haste",
        "isFolder": "yes",
        "children": [
          {
            "name": "haste.off",
            "patterns": [
              {
                "pattern": "^You feel your movements slow to normal.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"haste\",false)"
          },
          {
            "name": "haste.on",
            "patterns": [
              {
                "pattern": "^You begin moving much faster, almost seeming to blur.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"haste\",true)"
          }
        ]
      },
      {
        "name": "Levitation",
        "isFolder": "yes",
        "children": [
          {
            "name": "levitation.off",
            "patterns": [
              {
                "pattern": "^You slowly settle back to the ground.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"levitation\",false)"
          },
          {
            "name": "levitation.on",
            "patterns": [
              {
                "pattern": "^Your feet rise a few inches above the surface.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"levitation\",true)"
          }
        ]
      },
      {
        "name": "Stone Skin",
        "isFolder": "yes",
        "children": [
          {
            "name": "stone.skin.off",
            "patterns": [
              {
                "pattern": "^Your skin feels soft and pliable again.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"stone skin\",false)"
          },
          {
            "name": "stone.skin.on",
            "patterns": [
              {
                "pattern": "^There is a faint sound, a very high pitched shriek as your skin hardens.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"stone skin\",true)"
          }
        ]
      },
      {
        "name": "Protection from GoodEvil",
        "isFolder": "yes",
        "children": [
          {
            "name": "protection.from.good.off",
            "patterns": [
              {
                "pattern": "^You feel vulnerable to good forces again.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"protection from good\",false)"
          },
          {
            "name": "protection.from.evil.off",
            "patterns": [
              {
                "pattern": "^You feel vulnerable to evil forces again.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"protection from evil\",false)"
          },
          {
            "name": "protection.from.goodevil.on",
            "patterns": [
              {
                "pattern": "^You feel safer, as if there were forces watching over you.$",
                "type": "regex"
              }
            ]
          }
        ]
      },
      {
        "name": "Bless",
        "isFolder": "yes",
        "children": [
          {
            "name": "bless.off",
            "patterns": [
              {
                "pattern": "^You no longer feel blessed by the Powers.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"bless\",false)"
          },
          {
            "name": "bless.on",
            "patterns": [
              {
                "pattern": "^You glow briefly with a brilliant silver aura, which slowly sparkles and fades.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"bless\",true)"
          }
        ]
      },
      {
        "name": "Sanctuary",
        "isFolder": "yes",
        "children": [
          {
            "name": "sanctuary.off",
            "patterns": [
              {
                "pattern": "^The white aura surrounding you fades away.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"sanctuary\",false)"
          },
          {
            "name": "sanctuary.on",
            "patterns": [
              {
                "pattern": "^You begin glowing with a bright light\\!$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"sanctuary\",true)"
          }
        ]
      },
      {
        "name": "Sense Life",
        "isFolder": "yes",
        "children": [
          {
            "name": "sense.life.off",
            "patterns": [
              {
                "pattern": "^Lost-Sense-Life.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"sense life\",false)"
          },
          {
            "name": "sense.life.on",
            "patterns": [
              {
                "pattern": "^You feel a soft prickling on the back of your neck as your senses are heightened.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"sense life\",true)"
          }
        ]
      },
      {
        "name": "Infravision",
        "isFolder": "yes",
        "children": [
          {
            "name": "infravision.off",
            "patterns": [
              {
                "pattern": "^Lost Infravision$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"infravision\",true)"
          },
          {
            "name": "infravision.on",
            "patterns": [
              {
                "pattern": "^(\\w+)'s eyes glow red.$",
                "type": "regex"
              }
            ]
          }
        ]
      },
      {
        "name": "Pentacle",
        "isFolder": "yes",
        "children": [
          {
            "name": "pentacle.off",
            "patterns": [
              {
                "pattern": "^You feel the protection of the pentacle subsiding.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"pentacle\",false)"
          },
          {
            "name": "pentacle.on",
            "patterns": [
              {
                "pattern": "^A pentacle of reddish light shines briefly upon your chest before fading.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"pentacle\",true)"
          }
        ]
      },
      {
        "name": "Improved Invisibility",
        "isFolder": "yes",
        "children": [
          {
            "name": "impinvis.off",
            "patterns": [
              {
                "pattern": "^You fade back into sight.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"improved invisibility\",false)"
          },
          {
            "name": "impinvis.on",
            "patterns": [
              {
                "pattern": "^You dissolve into nothingness.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"improved invisibility\",true)"
          }
        ]
      },
      {
        "name": "Shield",
        "isFolder": "yes",
        "children": [
          {
            "name": "shield.off",
            "patterns": [
              {
                "pattern": "^Your force shield dissipates.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"shield\",false)"
          },
          {
            "name": "shield.on",
            "patterns": [
              {
                "pattern": "^You hear a high-pitched shriek as the air hardens around you, forming a shield.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"shield\",true)"
          }
        ]
      },
      {
        "name": "Pass Door",
        "isFolder": "yes",
        "children": [
          {
            "name": "passdoor.off",
            "patterns": [
              {
                "pattern": "^You are no longer translucent.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"pass door\",false)"
          },
          {
            "name": "passdoor.on",
            "patterns": [
              {
                "pattern": "^(\\w+) turns translucent.$",
                "type": "regex"
              }
            ]
          }
        ]
      },
      {
        "name": "Endurance of the Rhinoceros",
        "isFolder": "yes",
        "children": [
          {
            "name": "rhino.off",
            "patterns": [
              {
                "pattern": "^You are no longer a rhino.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"endurance of the rhinoceros\",false)"
          },
          {
            "name": "rhino.on",
            "patterns": [
              {
                "pattern": "^(\\w+)'s hide becomes thicker.$",
                "type": "regex"
              }
            ]
          }
        ]
      },
      {
        "name": "Wind Walk",
        "isFolder": "yes",
        "children": [
          {
            "name": "windwalk.off",
            "patterns": [
              {
                "pattern": "^The wind rushing through your body gradually slows, until its presence is gone.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"wind walk\",false)"
          },
          {
            "name": "windwalk.on",
            "patterns": [
              {
                "pattern": "^Your footsteps grow lighter as you prepare your body to become like the wind.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"wind walk\",true)"
          }
        ]
      },
      {
        "name": "Enhanced Strength",
        "isFolder": "yes",
        "children": [
          {
            "name": "enhstr.off",
            "patterns": [
              {
                "pattern": "^Your super strength has worn off.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"enhanced strength\",false)"
          },
          {
            "name": "enhstr.on",
            "patterns": [
              {
                "pattern": "^Your muscles surge with increased strength.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"enhanced strength\",true)"
          }
        ]
      },
      {
        "name": "Detect Magic",
        "isFolder": "yes",
        "children": [
          {
            "name": "detectmagic.off",
            "patterns": [
              {
                "pattern": "^You can no longer detect magical auras.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"detect magic\",false)"
          },
          {
            "name": "detectmagic.on",
            "patterns": [
              {
                "pattern": "^You feel a prickling on the back of your neck as your senses are heightened.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"detect magic\",true)"
          }
        ]
      },
      {
        "name": "Detect Illusion",
        "isFolder": "yes",
        "children": [
          {
            "name": "detectillusion.off",
            "patterns": [
              {
                "pattern": "^You have lost your ability to detect illusions.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"detect illusion\",false)"
          },
          {
            "name": "detectillusion.on",
            "patterns": [
              {
                "pattern": "^Goosebumps wash over you as the world starts to look a little bit more real.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"detect illusion\",true)"
          }
        ]
      },
      {
        "name": "Detect Alignment",
        "isFolder": "yes",
        "children": [
          {
            "name": "detectalign.off",
            "patterns": [
              {
                "pattern": "^You are no longer trnnanslucent.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"detect alignment\",false)"
          },
          {
            "name": "detectalign.on",
            "patterns": [
              {
                "pattern": "^A haze of crimson and gold sparks flit across your field of vision.$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.doAffect(\"detect alignment\",true)"
          }
        ]
      },
      {
        "name": "affects.list",
        "fireLength": "99",
        "patterns": [
          {
            "pattern": "^You are affected by the following:$",
            "type": "regex"
          }
        ],
        "children": [
          {
            "name": "resists",
            "patterns": [
              {
                "pattern": "^\\* You are resistant to: (.*).$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.myAffects.resists = string.split(string.trim(matches[2]),\" \")"
          },
          {
            "name": "vulnerabilities",
            "patterns": [
              {
                "pattern": "^\\* You are vulnerable to: (.*).$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.myAffects.vulnerabilities = string.split(string.trim(matches[2]),\" \")"
          },
          {
            "name": "racials",
            "patterns": [
              {
                "pattern": "^Racial: (.*)$",
                "type": "regex"
              }
            ],
            "script": "mmpkg.myAffects.racials = string.split(string.trim(matches[2]),\", \")"
          },
          {
            "name": "affects",
            "patterns": [
              {
                "pattern": "^Spell:(.*)- Level(\\s+)(\\d+), modifies",
                "type": "regex"
              }
            ]
          },
          {
            "name": "Total-end",
            "patterns": [
              {
                "pattern": "^Total of (\\d+) magical affects.$",
                "type": "regex"
              }
            ],
            "script": "setTriggerStayOpen(\"affects.list\",0)"
          }
        ]
      }
    ]
  },
  {
    "name": "msp",
    "isFolder": "yes",
    "children": [
      {
        "name": "sounds",
        "patterns": [
          {
            "pattern": "\\!\\!SOUND\\((.*) V=(\\d+) L=(\\d+) P=(\\d+) T=(\\w+)\\)",
            "type": "regex"
          }
        ],
        "script": "receiveMSP(matches[2]) deleteLine()"
      }
    ]
  },
  {
    "name": "mapper",
    "isFolder": "yes",
    "children": [
      {
        "name": "whereiswalk",
        "patterns": [
          {
            "pattern": "^You sense that (.*) may be located (.*).$",
            "type": "regex"
          }
        ],
        "script": "speedwalk(matches[3])"
      },
      {
        "name": "fake-sextant",
        "patterns": [
          {
            "pattern": "^\\((-+)\\)",
            "type": "regex"
          }
        ]
      },
      {
        "name": "fake-sextant-forest",
        "patterns": [
          {
            "pattern": "^\\((-+\\*Forested\\*---)\\) ",
            "type": "regex"
          }
        ]
      }
    ]
  },
  {
    "name": "Captures",
    "isFolder": "yes",
    "children": [
      {
        "name": "Clan",
        "patterns": [
          {
            "pattern": "^\\[CLAN\\] (.*)$",
            "type": "regex"
          },
          {
            "pattern": "^\\[(.*)\\] clan members? heard you say, (.*)$",
            "type": "regex"
          }
        ],
        "script": "mmpkg.Cap(\"Clan\",copy2decho(matches[1]))"
      },
      {
        "name": "Novice",
        "highlight": "yes",
        "highlightFG": "#d5d56a",
        "highlightBG": "#000000",
        "patterns": [
          {
            "pattern": "^(\\[CLAN Novice Adventurers\\] .*)$",
            "type": "regex"
          },
          {
            "pattern": "^(\\[.*\\] Novice clan members? heard you say, .*)$",
            "type": "regex"
          }
        ],
        "script": "mmpkg.Cap(\"Novice\",copy2decho(matches[1]))"
      },
      {
        "name": "Alliance",
        "patterns": [
          {
            "pattern": "^(\\[ALLIED.*\\] .*)$",
            "type": "regex"
          },
          {
            "pattern": "^(\\[\\d+\\] alliance members? heard you say, .*)$",
            "type": "regex"
          }
        ],
        "script": "mmpkg.Cap(\"Alliance\",copy2decho(matches[1]))"
      },
      {
        "name": "Talk",
        "patterns": [
          {
            "pattern": "^\\[TALK (.*)$",
            "type": "regex"
          }
        ],
        "script": "mmpkg.Cap(\"Talk\",copy2decho(matches[1]))"
      },
      {
        "name": "Relays",
        "patterns": [
          {
            "pattern": "^\\[(\\d+)\\] people|person in (.*) heard you relay (.*)$",
            "type": "regex"
          },
          {
            "pattern": "^(\\w+)\\@\\#(.*)$",
            "type": "regex"
          }
        ],
        "script": "mmpkg.Cap(\"Relays\",copy2decho(matches[1]))"
      },
      {
        "name": "Form",
        "patterns": [
          {
            "pattern": "(.*) tells the formation (.*)",
            "type": "regex"
          },
          {
            "pattern": "^You tell the formation (.*)",
            "type": "regex"
          }
        ],
        "script": "selectString(matches[1],1) if isAnsiFgColor(13) then mmpkg.Cap(\"Form\",copy2decho(matches[1])) end"
      },
      {
        "name": "Tells",
        "patterns": [
          {
            "pattern": "^You tell (.*)$",
            "type": "regex"
          },
          {
            "pattern": "^(.*) (tells|impresses upon) you '(.*)'$",
            "type": "regex"
          }
        ],
        "script": "selectString(matches[1],1) if isAnsiFgColor(3) then mmpkg.Cap(\"Tells\",copy2decho(matches[1])) end"
      },
      {
        "name": "Paging",
        "fireLength": "1",
        "patterns": [
          {
            "pattern": "^\\a(\\w+) is paging you...$",
            "type": "regex"
          }
        ],
        "script": "mmpkg.pagedby = matches[2]",
        "children": [
          {
            "name": "Reason",
            "patterns": [
              {
                "pattern": "^Reason: (.*)$",
                "type": "regex"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "Quest Tools",
    "isFolder": "yes",
    "children": [
      {
        "name": "Quest Timers",
        "isFolder": "yes",
        "children": [
          {
            "name": "timer",
            "patterns": [
              {
                "pattern": "^You have (\\d+) Alyrian minutes? remaining .* request .* quest.$",
                "type": "regex"
              }
            ],
            "script": "local time = (((tonumber(matches[2]) / 4) * 60)+4) if mmpkg.questtimer then killTimer(mmpkg.questtimer) end mmpkg.questtimer = tempTimer(time, function() raiseEvent(\"mmpkg.OnQuestTimer\") end)"
          },
          {
            "name": "Checkwait",
            "patterns": [
              {
                "pattern": "^(\\w+) (\\w+) tells you, 'As a reward for thy valor, I am awarding you ",
                "type": "regex"
              }
            ],
            "script": "local time = (((20 / 4) * 60)+4) if mmpkg.questtimer then killTimer(mmpkg.questtimer) end mmpkg.questtimer = tempTimer(time, function() raiseEvent(\"mmpkg.OnQuestTimer\") end)"
          }
        ]
      },
      {
        "name": "QLookTrigger",
        "patterns": [
          {
            "pattern": "^This quest \\[(\\d+)\\] is called '(.*)',$",
            "type": "regex"
          }
        ]
      },
      {
        "name": "AutoStatus",
        "patterns": [
          {
            "pattern": "^You have completed a part of quest \\#(\\d+), '.*'\\!",
            "type": "regex"
          }
        ],
        "script": "send(\"quest status \" .. matches[2],false)"
      }
    ]
  },
  {
    "name": "Miscellaneous",
    "isFolder": "yes",
    "children": [
      {
        "name": "setCharName",
        "patterns": [
          {
            "pattern": "^(\\w+)'s registered email address is",
            "type": "regex"
          }
        ],
        "script": "mmpkg.CharName = matches[2] cecho(\"\\n\\n<white>Setting Character Name: \" .. matches[2])"
      },
      {
        "name": "onLogin",
        "patterns": [
          {
            "pattern": "Materia Magica is brought to you",
            "type": "startOfLine"
          },
          {
            "pattern": "Welcome back to Materia Magica.",
            "type": "exactMatch"
          }
        ],
        "script": "raiseEvent(\"mmpkg.OnLogin\")"
      },
      {
        "name": "YouDied",
        "patterns": [
          {
            "pattern": "^Your disembodied soul rises from your ravaged corpse.$",
            "type": "regex"
          }
        ],
        "script": "mmpkg.dead = true raiseEvent(\"mmpkg.OnDeath\")"
      },
      {
        "name": "YouLive",
        "patterns": [
          {
            "pattern": "^The Powers take pity on you and restore your soul to your body.$",
            "type": "regex"
          }
        ],
        "script": "mmpkg.dead = false raiseEvent(\"mmpkg.OnAlive\")"
      },
      {
        "name": "Linkify",
        "matchall": "yes",
        "patterns": [
          {
            "pattern": "(?i:https?:\\/\\/\\S*)",
            "type": "regex"
          },
          {
            "pattern": "(?i:www\\.\\S*)",
            "type": "regex"
          }
        ]
      }
    ]
  },
  {
    "name": "Scan Helper",
    "isFolder": "yes",
    "children": [{
        "name": "GagNone",
        "patterns": [{
          "pattern": "^You don't see anything (upwards|downwards|to the north|to the south|to the west|to the east|to the northwest|to the northeast|to the southwest|to the southeast).$",
          "type": "regex"
          }],
        "script": "deleteLine()"
      },
      {
        "name": "RoomsAway",
        "patterns": [{
          "pattern": "^(.*) is (right here|close by|not far off|a brief walk away|rather far off|in the distance) (upwards|downwards|to the north|to the south|to the west|to the east|to the northwest|to the northeast|to the southwest|to the southeast).$",
          "type": "regex"
        }]
    }]
  }
]